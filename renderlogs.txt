{"level":30,"time":1768416359479,"pid":83,"hostname":"srv-d3opgf6mcj7s739fv57g-7494cb4497-lp68w","reqId":"req-f","req":{"method":"DELETE","url":"/api/auth/account","host":"fightcrewapp-backend.onrender.com","remoteAddress":"10.18.200.132","remotePort":38354},"msg":"incoming request"}
[AUTH] Verifying token, JWT_SECRET exists: true
[AUTH] Token decoded, userId: 7be56662-3b02-4a2d-87a3-48b957e9597f
{"level":30,"time":1768416359479,"pid":83,"hostname":"srv-d3opgf6mcj7s739fv57g-7494cb4497-lp68w","reqId":"req-f","method":"DELETE","url":"/api/auth/account","userAgent":"okhttp/4.12.0","ip":"10.18.200.132","msg":"Incoming request"}
[AUTH] User lookup result: Found user one@fightingtomatoes.com
[AUTH] Authentication successful for user: one@fightingtomatoes.com
{"level":50,"time":1768416359487,"pid":83,"hostname":"srv-d3opgf6mcj7s739fv57g-7494cb4497-lp68w","reqId":"req-f","err":{"type":"PrismaClientValidationError","message":"\nInvalid `prisma.user.update()` invocation:\n\n{\n  where: {\n    id: undefined,\n?   email?: String,\n?   googleId?: String,\n?   appleId?: String,\n?   AND?: UserWhereInput | UserWhereInput[],\n?   OR?: UserWhereInput[],\n?   NOT?: UserWhereInput | UserWhereInput[],\n?   emailVerified?: BoolFilter | Boolean,\n?   emailVerificationToken?: StringNullableFilter | String | Null,\n?   password?: StringNullableFilter | String | Null,\n?   firstName?: StringNullableFilter | String | Null,\n?   lastName?: StringNullableFilter | String | Null,\n?   displayName?: StringNullableFilter | String | Null,\n?   avatar?: StringNullableFilter | String | Null,\n?   authProvider?: EnumAuthProviderFilter | AuthProvider,\n?   emailVerificationExpires?: DateTimeNullableFilter | DateTime | Null,\n?   passwordResetToken?: StringNullableFilter | String | Null,\n?   passwordResetExpires?: DateTimeNullableFilter | DateTime | Null,\n?   isActive?: BoolFilter | Boolean,\n?   isEmailVerified?: BoolFilter | Boolean,\n?   wantsEmails?: BoolFilter | Boolean,\n?   pushToken?: StringNullableFilter | String | Null,\n?   notificationsEnabled?: BoolFilter | Boolean,\n?   isMedia?: BoolFilter | Boolean,\n?   mediaOrganization?: StringNullableFilter | String | Null,\n?   mediaWebsite?: StringNullableFilter | String | Null,\n?   points?: IntFilter | Int,\n?   level?: IntFilter | Int,\n?   totalRatings?: IntFilter | Int,\n?   totalReviews?: IntFilter | Int,\n?   upvotesReceived?: IntFilter | Int,\n?   downvotesReceived?: IntFilter | Int,\n?   accuracyScore?: FloatFilter | Float,\n?   createdAt?: DateTimeFilter | DateTime,\n?   updatedAt?: DateTimeFilter | DateTime,\n?   lastLoginAt?: DateTimeNullableFilter | DateTime | Null,\n?   refreshTokens?: RefreshTokenListRelationFilter,\n?   ratings?: FightRatingListRelationFilter,\n?   reviews?: FightReviewListRelationFilter,\n?   preFightComments?: PreFightCommentListRelationFilter,\n?   predictions?: FightPredictionListRelationFilter,\n?   followedFighters?: UserFighterFollowListRelationFilter,\n?   reviewVotes?: ReviewVoteListRelationFilter,\n?   preFightCommentVotes?: PreFightCommentVoteListRelationFilter,\n?   activityLog?: UserActivityListRelationFilter,\n?   notifications?: UserNotificationListRelationFilter,\n?   notificationRules?: UserNotificationRuleListRelationFilter,\n?   analyticsEvents?: AnalyticsEventListRelationFilter,\n?   userSessions?: UserSessionListRelationFilter,\n?   createdCrews?: CrewListRelationFilter,\n?   crewMemberships?: CrewMemberListRelationFilter,\n?   crewMessages?: CrewMessageListRelationFilter,\n?   crewPredictions?: CrewPredictionListRelationFilter,\n?   crewRoundVotes?: CrewRoundVoteListRelationFilter,\n?   crewReactions?: CrewReactionListRelationFilter,\n?   feedback?: UserFeedbackListRelationFilter\n  },\n  data: {\n    email: \"deleted_1768416359485_rff6xi@deleted.local\",\n    password: null,\n    firstName: null,\n    lastName: null,\n    displayName: \"Deleted User\",\n    avatar: null,\n    googleId: null,\n    appleId: null,\n    emailVerificationToken: null,\n    emailVerificationExpires: null,\n    passwordResetToken: null,\n    passwordResetExpires: null,\n    pushToken: null,\n    isActive: false,\n    isEmailVerified: false,\n    wantsEmails: false,\n    isMedia: false,\n    mediaOrganization: null,\n    mediaWebsite: null\n  }\n}\n\nArgument `where` of type UserWhereUniqueInput needs at least one of `id`, `email`, `googleId` or `appleId` arguments. Available options are marked with ?.","stack":"PrismaClientValidationError: \nInvalid `prisma.user.update()` invocation:\n\n{\n  where: {\n    id: undefined,\n?   email?: String,\n?   googleId?: String,\n?   appleId?: String,\n?   AND?: UserWhereInput | UserWhereInput[],\n?   OR?: UserWhereInput[],\n?   NOT?: UserWhereInput | UserWhereInput[],\n?   emailVerified?: BoolFilter | Boolean,\n?   emailVerificationToken?: StringNullableFilter | String | Null,\n?   password?: StringNullableFilter | String | Null,\n?   firstName?: StringNullableFilter | String | Null,\n?   lastName?: StringNullableFilter | String | Null,\n?   displayName?: StringNullableFilter | String | Null,\n?   avatar?: StringNullableFilter | String | Null,\n?   authProvider?: EnumAuthProviderFilter | AuthProvider,\n?   emailVerificationExpires?: DateTimeNullableFilter | DateTime | Null,\n?   passwordResetToken?: StringNullableFilter | String | Null,\n?   passwordResetExpires?: DateTimeNullableFilter | DateTime | Null,\n?   isActive?: BoolFilter | Boolean,\n?   isEmailVerified?: BoolFilter | Boolean,\n?   wantsEmails?: BoolFilter | Boolean,\n?   pushToken?: StringNullableFilter | String | Null,\n?   notificationsEnabled?: BoolFilter | Boolean,\n?   isMedia?: BoolFilter | Boolean,\n?   mediaOrganization?: StringNullableFilter | String | Null,\n?   mediaWebsite?: StringNullableFilter | String | Null,\n?   points?: IntFilter | Int,\n?   level?: IntFilter | Int,\n?   totalRatings?: IntFilter | Int,\n?   totalReviews?: IntFilter | Int,\n?   upvotesReceived?: IntFilter | Int,\n?   downvotesReceived?: IntFilter | Int,\n?   accuracyScore?: FloatFilter | Float,\n?   createdAt?: DateTimeFilter | DateTime,\n?   updatedAt?: DateTimeFilter | DateTime,\n?   lastLoginAt?: DateTimeNullableFilter | DateTime | Null,\n?   refreshTokens?: RefreshTokenListRelationFilter,\n?   ratings?: FightRatingListRelationFilter,\n?   reviews?: FightReviewListRelationFilter,\n?   preFightComments?: PreFightCommentListRelationFilter,\n?   predictions?: FightPredictionListRelationFilter,\n?   followedFighters?: UserFighterFollowListRelationFilter,\n?   reviewVotes?: ReviewVoteListRelationFilter,\n?   preFightCommentVotes?: PreFightCommentVoteListRelationFilter,\n?   activityLog?: UserActivityListRelationFilter,\n?   notifications?: UserNotificationListRelationFilter,\n?   notificationRules?: UserNotificationRuleListRelationFilter,\n?   analyticsEvents?: AnalyticsEventListRelationFilter,\n?   userSessions?: UserSessionListRelationFilter,\n?   createdCrews?: CrewListRelationFilter,\n?   crewMemberships?: CrewMemberListRelationFilter,\n?   crewMessages?: CrewMessageListRelationFilter,\n?   crewPredictions?: CrewPredictionListRelationFilter,\n?   crewRoundVotes?: CrewRoundVoteListRelationFilter,\n?   crewReactions?: CrewReactionListRelationFilter,\n?   feedback?: UserFeedbackListRelationFilter\n  },\n  data: {\n    email: \"deleted_1768416359485_rff6xi@deleted.local\",\n    password: null,\n    firstName: null,\n    lastName: null,\n    displayName: \"Deleted User\",\n    avatar: null,\n    googleId: null,\n    appleId: null,\n    emailVerificationToken: null,\n    emailVerificationExpires: null,\n    passwordResetToken: null,\n    passwordResetExpires: null,\n    pushToken: null,\n    isActive: false,\n    isEmailVerified: false,\n    wantsEmails: false,\n    isMedia: false,\n    mediaOrganization: null,\n    mediaWebsite: null\n  }\n}\n\nArgument `where` of type UserWhereUniqueInput needs at least one of `id`, `email`, `googleId` or `appleId` arguments. Available options are marked with ?.\n    at wn (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Object.<anonymous> (/app/packages/backend/dist/routes/auth.fastify.js:433:13)","name":"PrismaClientValidationError","clientVersion":"5.22.0"},"message":"\nInvalid `prisma.user.update()` invocation:\n\n{\n  where: {\n    id: undefined,\n?   email?: String,\n?   googleId?: String,\n?   appleId?: String,\n?   AND?: UserWhereInput | UserWhereInput[],\n?   OR?: UserWhereInput[],\n?   NOT?: UserWhereInput | UserWhereInput[],\n?   emailVerified?: BoolFilter | Boolean,\n?   emailVerificationToken?: StringNullableFilter | String | Null,\n?   password?: StringNullableFilter | String | Null,\n?   firstName?: StringNullableFilter | String | Null,\n?   lastName?: StringNullableFilter | String | Null,\n?   displayName?: StringNullableFilter | String | Null,\n?   avatar?: StringNullableFilter | String | Null,\n?   authProvider?: EnumAuthProviderFilter | AuthProvider,\n?   emailVerificationExpires?: DateTimeNullableFilter | DateTime | Null,\n?   passwordResetToken?: StringNullableFilter | String | Null,\n?   passwordResetExpires?: DateTimeNullableFilter | DateTime | Null,\n?   isActive?: BoolFilter | Boolean,\n?   isEmailVerified?: BoolFilter | Boolean,\n?   wantsEmails?: BoolFilter | Boolean,\n?   pushToken?: StringNullableFilter | String | Null,\n?   notificationsEnabled?: BoolFilter | Boolean,\n?   isMedia?: BoolFilter | Boolean,\n?   mediaOrganization?: StringNullableFilter | String | Null,\n?   mediaWebsite?: StringNullableFilter | String | Null,\n?   points?: IntFilter | Int,\n?   level?: IntFilter | Int,\n?   totalRatings?: IntFilter | Int,\n?   totalReviews?: IntFilter | Int,\n?   upvotesReceived?: IntFilter | Int,\n?   downvotesReceived?: IntFilter | Int,\n?   accuracyScore?: FloatFilter | Float,\n?   createdAt?: DateTimeFilter | DateTime,\n?   updatedAt?: DateTimeFilter | DateTime,\n?   lastLoginAt?: DateTimeNullableFilter | DateTime | Null,\n?   refreshTokens?: RefreshTokenListRelationFilter,\n?   ratings?: FightRatingListRelationFilter,\n?   reviews?: FightReviewListRelationFilter,\n?   preFightComments?: PreFightCommentListRelationFilter,\n?   predictions?: FightPredictionListRelationFilter,\n?   followedFighters?: UserFighterFollowListRelationFilter,\n?   reviewVotes?: ReviewVoteListRelationFilter,\n?   preFightCommentVotes?: PreFightCommentVoteListRelationFilter,\n?   activityLog?: UserActivityListRelationFilter,\n?   notifications?: UserNotificationListRelationFilter,\n?   notificationRules?: UserNotificationRuleListRelationFilter,\n?   analyticsEvents?: AnalyticsEventListRelationFilter,\n?   userSessions?: UserSessionListRelationFilter,\n?   createdCrews?: CrewListRelationFilter,\n?   crewMemberships?: CrewMemberListRelationFilter,\n?   crewMessages?: CrewMessageListRelationFilter,\n?   crewPredictions?: CrewPredictionListRelationFilter,\n?   crewRoundVotes?: CrewRoundVoteListRelationFilter,\n?   crewReactions?: CrewReactionListRelationFilter,\n?   feedback?: UserFeedbackListRelationFilter\n  },\n  data: {\n    email: \"deleted_1768416359485_rff6xi@deleted.local\",\n    password: null,\n    firstName: null,\n    lastName: null,\n    displayName: \"Deleted User\",\n    avatar: null,\n    googleId: null,\n    appleId: null,\n    emailVerificationToken: null,\n    emailVerificationExpires: null,\n    passwordResetToken: null,\n    passwordResetExpires: null,\n    pushToken: null,\n    isActive: false,\n    isEmailVerified: false,\n    wantsEmails: false,\n    isMedia: false,\n    mediaOrganization: null,\n    mediaWebsite: null\n  }\n}\n\nArgument `where` of type UserWhereUniqueInput needs at least one of `id`, `email`, `googleId` or `appleId` arguments. Available options are marked with ?.","stack":"PrismaClientValidationError: \nInvalid `prisma.user.update()` invocation:\n\n{\n  where: {\n    id: undefined,\n?   email?: String,\n?   googleId?: String,\n?   appleId?: String,\n?   AND?: UserWhereInput | UserWhereInput[],\n?   OR?: UserWhereInput[],\n?   NOT?: UserWhereInput | UserWhereInput[],\n?   emailVerified?: BoolFilter | Boolean,\n?   emailVerificationToken?: StringNullableFilter | String | Null,\n?   password?: StringNullableFilter | String | Null,\n?   firstName?: StringNullableFilter | String | Null,\n?   lastName?: StringNullableFilter | String | Null,\n?   displayName?: StringNullableFilter | String | Null,\n?   avatar?: StringNullableFilter | String | Null,\n?   authProvider?: EnumAuthProviderFilter | AuthProvider,\n?   emailVerificationExpires?: DateTimeNullableFilter | DateTime | Null,\n?   passwordResetToken?: StringNullableFilter | String | Null,\n?   passwordResetExpires?: DateTimeNullableFilter | DateTime | Null,\n?   isActive?: BoolFilter | Boolean,\n?   isEmailVerified?: BoolFilter | Boolean,\n?   wantsEmails?: BoolFilter | Boolean,\n?   pushToken?: StringNullableFilter | String | Null,\n?   notificationsEnabled?: BoolFilter | Boolean,\n?   isMedia?: BoolFilter | Boolean,\n?   mediaOrganization?: StringNullableFilter | String | Null,\n?   mediaWebsite?: StringNullableFilter | String | Null,\n?   points?: IntFilter | Int,\n?   level?: IntFilter | Int,\n?   totalRatings?: IntFilter | Int,\n?   totalReviews?: IntFilter | Int,\n?   upvotesReceived?: IntFilter | Int,\n?   downvotesReceived?: IntFilter | Int,\n?   accuracyScore?: FloatFilter | Float,\n?   createdAt?: DateTimeFilter | DateTime,\n?   updatedAt?: DateTimeFilter | DateTime,\n?   lastLoginAt?: DateTimeNullableFilter | DateTime | Null,\n?   refreshTokens?: RefreshTokenListRelationFilter,\n?   ratings?: FightRatingListRelationFilter,\n?   reviews?: FightReviewListRelationFilter,\n?   preFightComments?: PreFightCommentListRelationFilter,\n?   predictions?: FightPredictionListRelationFilter,\n?   followedFighters?: UserFighterFollowListRelationFilter,\n?   reviewVotes?: ReviewVoteListRelationFilter,\n?   preFightCommentVotes?: PreFightCommentVoteListRelationFilter,\n?   activityLog?: UserActivityListRelationFilter,\n?   notifications?: UserNotificationListRelationFilter,\n?   notificationRules?: UserNotificationRuleListRelationFilter,\n?   analyticsEvents?: AnalyticsEventListRelationFilter,\n?   userSessions?: UserSessionListRelationFilter,\n?   createdCrews?: CrewListRelationFilter,\n?   crewMemberships?: CrewMemberListRelationFilter,\n?   crewMessages?: CrewMessageListRelationFilter,\n?   crewPredictions?: CrewPredictionListRelationFilter,\n?   crewRoundVotes?: CrewRoundVoteListRelationFilter,\n?   crewReactions?: CrewReactionListRelationFilter,\n?   feedback?: UserFeedbackListRelationFilter\n  },\n  data: {\n    email: \"deleted_1768416359485_rff6xi@deleted.local\",\n    password: null,\n    firstName: null,\n    lastName: null,\n    displayName: \"Deleted User\",\n    avatar: null,\n    googleId: null,\n    appleId: null,\n    emailVerificationToken: null,\n    emailVerificationExpires: null,\n    passwordResetToken: null,\n    passwordResetExpires: null,\n    pushToken: null,\n    isActive: false,\n    isEmailVerified: false,\n    wantsEmails: false,\n    isMedia: false,\n    mediaOrganization: null,\n    mediaWebsite: null\n  }\n}\n\nArgument `where` of type UserWhereUniqueInput needs at least one of `id`, `email`, `googleId` or `appleId` arguments. Available options are marked with ?.\n    at wn (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/app/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Object.<anonymous> (/app/packages/backend/dist/routes/auth.fastify.js:433:13)","msg":"Delete account error"}
{"level":30,"time":1768416359487,"pid":83,"hostname":"srv-d3opgf6mcj7s739fv57g-7494cb4497-lp68w","reqId":"req-f","res":{"statusCode":500},"responseTime":7.685445785522461,"msg":"request completed"}
{"level":30,"time":1768416363482,"pid":83,"hostname":"srv-d3opgf6mcj7s739fv57g-7494cb4497-lp68w","reqId":"req-g","req":{"method":"GET","url":"/api/events","host":"fightcrewapp-backend.onrender.com","remoteAddress":"10.16.51.133","remotePort":49442},"msg":"incoming request"}
{"level":30,"time":1768416363482,"pid":83,"hostname":"srv-d3opgf6mcj7s739fv57g-7494cb4497-lp68w","reqId":"req-g","method":"GET","url":"/api/events","userAgent":"okhttp/4.12.0","ip":"10.16.51.133","msg":"Incoming request"}
{"level":30,"time":1768416363581,"pid":83,"hostname":"srv-d3opgf6mcj7s739fv57g-7494cb4497-lp68w","reqId":"req-g","res":{"statusCode":200},"responseTime":99.00233554840088,"msg":"request completed"}